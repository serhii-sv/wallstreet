(()=>{var e=$(".search-list li"),s=$(".search-list"),r=$(".search-sm"),a=$(".search-input-sm .search-box-sm"),t=$(".search-list-sm");$((function(){"use strict";var n=$(".content-overlay");if($(".header-search-input").focus((function(){$(this).parent("div").addClass("header-search-wrapper-focus")})).blur((function(){$(this).parent("div").removeClass("header-search-wrapper-focus")})),$(".search-button").click((function(e){r.is(":hidden")?(r.show(),a.focus()):(r.hide(),a.val(""))})),$(".search-input-sm").on("click",(function(){a.focus()})),$(".search-sm-close").click((function(e){r.hide(),a.val("")})),$(".search-list").length>0)var i=new PerfectScrollbar(".search-list",{wheelSpeed:2,wheelPropagation:!1,minScrollbarLength:20});if(t.length>0)var c=new PerfectScrollbar(".search-list-sm",{wheelSpeed:2,wheelPropagation:!1,minScrollbarLength:20});$(".header-search-wrapper .header-search-input,.search-input-sm .search-box-sm").data("search");$(".search-sm-close").on("click",(function(){a.val(""),a.blur(),e.remove(),s.addClass("display-none"),n.hasClass("show")&&n.removeClass("show")})),n.on("click",(function(){e.remove(),n.removeClass("show"),r.hide(),a.val(""),s.addClass("display-none"),$(".search-input-sm .search-box-sm, .header-search-input").val("")})),$(".header-search-wrapper .header-search-input, .search-input-sm .search-box-sm").on("keyup",(function(e){n.addClass("show"),s.removeClass("display-none");var r=$(this);if(38!==e.keyCode&&40!==e.keyCode&&13!==e.keyCode){27==e.keyCode&&(n.removeClass("show"),r.val(""),r.blur());var a=$(this).val().toLowerCase();if($("ul.search-list li").remove(),""!=a&&a.length>2){var i="",c="";$.ajax({url:"/ajax/search-users",method:"post",data:"search="+a,headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},success:function(e){var s=$.parseJSON(e).html;""==s&&""==i&&(i=$("#search-not-found").html());var r=$("#default-search-main").html();c=r.concat(s,i),$("ul.search-list").html(c)}})}else n.hasClass("show")&&(n.removeClass("show"),s.addClass("display-none"))}$(".header-search-wrapper .current_item").length&&(s.scrollTop(0),s.scrollTop($(".search-list .current_item:first").offset().top-s.height())),$(".search-input-sm .current_item").length&&(t.scrollTop(0),t.scrollTop($(".search-list-sm .current_item:first").offset().top-t.height()))})),$("#navbarForm").on("submit",(function(e){e.preventDefault()})),$(window).on("keydown",(function(e){var s,r,a=$(".search-list li.current_item");if(40===e.keyCode?(s=a.next(),a.removeClass("current_item"),a=s.addClass("current_item")):38===e.keyCode&&(r=a.prev(),a.removeClass("current_item"),a=r.addClass("current_item")),13===e.keyCode&&$(".search-list li.current_item").length>0){var t=$("li.current_item a");window.location=$("li.current_item a").attr("href"),$(t).trigger("click")}})),s.mouseenter((function(){$(".search-list").length>0&&i.update(),t.length>0&&c.update()})),$(document).on("mouseenter",".search-list li",(function(e){$(this).siblings().removeClass("current_item"),$(this).addClass("current_item")})),$(document).on("click",".search-list li",(function(e){e.stopPropagation()}))})),$(window).on("resize",(function(){$(window).width()<992&&($(".header-search-input").val(""),$(".header-search-input").closest(".search-list li").remove()),$(window).width()>993&&(r.hide(),a.val(""),$(".search-input-sm .search-box-sm").val(""))}))})();